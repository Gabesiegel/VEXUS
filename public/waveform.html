<!DOCTYPE HTML>
<html lang="en">
<head>
    <title>Waveforms - VExUS ATLAS</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <meta name="author" content="Gabesiegel" />
    <meta name="last-modified" content="2024-03-07" />
    
    <!-- Initial visibility control -->
    <style>
    body {
        opacity: 0;
        transition: opacity 0.3s ease;
    }
    </style>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        document.body.style.opacity = '1';
        if (typeof initializeMenuToggle === 'function') {
            initializeMenuToggle();
        }
    });
    </script>
    
    <!-- CSS -->
    <link rel="stylesheet" href="html5up-phantom/assets/css/main.css" />
    <link rel="stylesheet" href="html5up-phantom/assets/css/fontawesome-all.min.css" />
    <link rel="stylesheet" href="html5up-phantom/assets/css/header.css" />
    <link rel="stylesheet" href="html5up-phantom/assets/css/logo.css" />
    <link rel="stylesheet" href="html5up-phantom/assets/css/sidebar.css" />
    <noscript><link rel="stylesheet" href="html5up-phantom/assets/css/noscript.css" /></noscript>
    
    <style>
        .waveform-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px;
            background: #ffffff;
            border-radius: 10px;
        }

        .waveform-section {
            margin-bottom: 40px;
            padding: 30px;
            background: #fcfcfc;
            border-radius: 8px;
            transition: transform 0.3s ease;
        }

        .waveform-section:hover {
            transform: translateY(-5px);
        }

        .waveform-section h2 {
            color: #2c3e50;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }

        .waveform-image {
            max-width: 100%;
            height: auto;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .waveform-section h3 {
            color: #34495e;
            margin-top: 20px;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .waveform-section ul, .waveform-section ol {
            margin-left: 25px;
            margin-bottom: 20px;
        }
        
        .waveform-section li {
            margin-bottom: 10px;
            line-height: 1.6;
        }
        
        .reference-list {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #e9ecef;
            font-size: 0.9em;
        }
        
        .reference-list li {
            margin-bottom: 8px;
        }
        
        .reference-list a {
            color: #3498db;
            text-decoration: none;
            border-bottom: 1px dotted #3498db;
        }
        
        .reference-list a:hover {
            border-bottom: 1px solid #3498db;
        }

        /* Tile styling for images */
        .image-tile {
            background: #ffffff;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            padding: 20px;
            margin: 25px 0;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            overflow: hidden;
        }
        
        .image-tile:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }
        
        .image-tile img {
            width: 100%;
            border-radius: 6px;
            margin-bottom: 15px;
        }
        
        .image-tile .caption {
            font-size: 1.05em;
            color: #34495e;
            text-align: center;
            padding: 0 10px;
            line-height: 1.5;
        }
        
        .image-tile .title {
            font-size: 1.25em;
            font-weight: 600;
            margin-bottom: 10px;
            color: #2c3e50;
            text-align: center;
        }

        /* Updated references styling */
        .references-section {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 10px;
            margin-top: 40px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .references-section h2 {
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 15px;
            margin-bottom: 25px;
            color: #2c3e50;
            font-weight: 600;
        }
        
        .references-list {
            counter-reset: ref-counter;
            list-style-type: none;
            padding-left: 0;
            margin-left: 0;
        }
        
        .references-list li {
            position: relative;
            padding-left: 35px;
            margin-bottom: 20px;
            line-height: 1.6;
        }
        
        .references-list li::before {
            counter-increment: ref-counter;
            content: counter(ref-counter);
            position: absolute;
            left: 0;
            top: 0;
            font-weight: 600;
            color: #3498db;
            background: #e1f0fa;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            text-align: center;
            line-height: 25px;
            font-size: 0.85em;
        }
        
        .references-list a {
            color: #3498db;
            text-decoration: none;
            transition: color 0.2s;
            border-bottom: 1px dotted #3498db;
            padding-bottom: 1px;
        }
        
        .references-list a:hover {
            color: #2980b9;
            border-bottom: 1px solid #2980b9;
        }
        
        /* Updated citation styling to match education.html without blue coloring and without dotted line */
        .citation {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            min-width: 20px;
            height: 20px;
            background-color: #f0f0f0;
            color: #666;
            border-radius: 10px;
            font-size: 0.8em;
            padding: 0 6px;
            margin: 0 2px;
            font-weight: 500;
            transition: all 0.2s ease;
            vertical-align: super;
            text-decoration: none;
            border: none;
        }

        .citation:hover {
            background-color: #6c757d;
            color: white;
            transform: translateY(-1px);
        }

        /* Remove blue color and dotted line from citation links */
        .citation a {
            color: inherit;
            text-decoration: none;
            border: none;
        }

        .citation a:hover {
            color: inherit;
            text-decoration: none;
            border: none;
        }

        /* Remove old superscript citation styling */
        sup.citation {
            font-size: 0.75em;
            line-height: 0;
            position: relative;
            vertical-align: baseline;
            top: -0.5em;
            margin: 0 2px;
            border: none;
        }
        
        sup.citation a {
            color: inherit;
            text-decoration: none;
            padding: 0 2px;
            border-radius: 3px;
            transition: background-color 0.2s;
            border: none;
        }
        
        sup.citation a:hover {
            background-color: #e1f0fa;
            color: inherit;
            border: none;
        }

        /* Updated references styling to match education.html */
        .reference-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .reference-tile {
            background-color: #fcfcfc;
            border-radius: 8px;
            padding: 20px;
            transition: transform 0.3s ease;
        }

        .reference-tile:hover {
            transform: translateY(-1px);
        }

        .reference-number {
            display: inline-block;
            background-color: #6c757d;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            margin-right: 10px;
            font-weight: bold;
        }

        .reference-title {
            font-weight: 600;
            margin-bottom: 10px;
            color: #2c3e50;
        }

        .reference-authors {
            font-style: italic;
            color: #555;
            margin-bottom: 8px;
        }

        .reference-journal {
            color: #666;
            margin-bottom: 8px;
        }

        .reference-link {
            display: inline-block;
            margin-top: 10px;
            color: #6c757d;
            text-decoration: none;
            font-weight: 500;
        }

        .reference-link:hover {
            color: #495057;
            text-decoration: underline;
        }

        /* Remove CSS-based scroll controls */
        .fancybox__container {
            --fancybox-scrollbar-width: 8px;
            --fancybox-scrollbar-background: rgba(24, 24, 24, 0.1);
            --fancybox-scrollbar-thumb: rgba(24, 24, 24, 0.3);
        }

        .fancybox__content {
            padding: 0;
            max-height: none;
            overflow-y: visible;
        }

        .fancybox__content::-webkit-scrollbar {
            display: none;
        }

        /* Prevent body scroll when lightbox is open */
        body.fancybox-active {
            overflow: visible;
        }

        /* Update lightbox content styling */
        .lightbox-content {
            padding: 30px;
            background: #fff;
            border-radius: 8px;
            margin: 0;
            width: 100%;
            box-sizing: border-box;
        }

        /* Ensure images don't overflow */
        .lightbox-content img {
            max-width: 100%;
            height: auto;
        }

        /* Mobile optimizations */
        @media (max-width: 768px) {
            .fancybox__toolbar {
                --f-button-width: 44px;
                --f-button-height: 44px;
            }

            .fancybox__toolbar .is-close {
                top: 10px;
                right: 10px;
            }
        }

        /* Image hover effects */
        .image-container img {
            transition: transform 0.3s ease;
            cursor: pointer;
        }

        .image-container img:hover {
            transform: scale(1.02);
        }

        /* Backdrop styling */
        .fancybox__backdrop {
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
        }
    </style>
</head>
<body class="is-preload">
    <!-- Wrapper -->
    <div id="wrapper">
        <header id="header">
            <div class="inner">
                <!-- Logo -->
                <a href="index.html" class="logo">
                    <span class="symbol"><img src="./images/VEXUS.ATLAS.png" alt="" /></span>
                    <span class="title">VExUS ATLAS</span>
                </a>
                
                <nav>
                    <ul>
                        <li><a href="#menu">Menu</a></li>
                    </ul>
                </nav>
            </div>
        </header>

        <!-- Sidebar Menu -->
        <nav id="menu">
            <div class="inner">
                <div class="logo-container">
                    <img src="./images/VEXUS.ATLAS.png" alt="VExUS ATLAS Logo" class="sidebar-logo">
                </div>
                <h2>Menu</h2>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="index.html">VEXUS Overview</a></li>
                    <li><a href="waveform.html">Waveforms</a></li>
                    <li><a href="calculator.html">AI Image Recognition</a></li>
                    <li><a href="acquisition.html">Image Acquisition Guide</a></li>
                    <li><a href="Publications.html">Publications</a></li>
                    <li><a href="literature_review.html">Literature Review</a></li>
                    <li><a href="image_gallery.html">Image Gallery</a></li>
                    <li><a href="about.html">About VExUS ATLAS</a></li>
                    <li><a href="our_team.html">Our Team</a></li>
                    <li><a href="contact.html">Contact</a></li>
                </ul>
                <a href="#menu" class="close">✕</a>
            </div>
        </nav>

        <!-- Menu Overlay -->
        <div class="menu-overlay"></div>

        <!-- Main Content -->
        <div id="main">
            <div class="inner">
                <div class="logo-container">
                    <img src="./images/VEXUS.ATLAS.png" alt="VExUS ATLAS Logo" class="logo">
                </div>
                <div class="waveform-container">
                    <h1>Interpreting VExUS Doppler Waveforms</h1>
                    
                    <div class="waveform-section">
                        <h2>Introduction to VExUS and Venous Waveforms</h2>
                        <p>Venous Excess Ultrasound (VExUS) is a point-of-care ultrasound assessment method that evaluates systemic venous congestion by examining the Doppler waveforms of key veins (hepatic, portal, and intrarenal) alongside the size and variation of the inferior vena cava (IVC)<a href="#reference-1" class="citation">1</a><a href="#reference-2" class="citation">2</a>. By analyzing these venous patterns, clinicians can estimate how elevated right-sided heart pressures or excessive fluid loading affect organ blood flow<a href="#reference-1" class="citation">1</a><a href="#reference-3" class="citation">3</a>.</p>
                        
                        <p>Recognizing normal waveforms versus mild or severe abnormalities provides an immediate snapshot of venous congestion:</p>
                        <ul>
                            <li><strong>Normal waveforms</strong> suggest no significant congestion.</li>
                            <li><strong>Mild abnormalities</strong> indicate early or moderate venous hypertension.</li>
                            <li><strong>Severe abnormalities</strong> reflect high venous pressure and substantial backward flow.</li>
                        </ul>
                        <p>This resource will describe how to recognize these pattern changes in each vein type.</p>
                    </div>

                    <div class="waveform-section">
                        <h2>EKG Tracing in VExUS Assessment</h2>
                        <p>Hepatic vein waveforms are best interpreted with respect to the cardiac cycle, making simultaneous EKG tracing invaluable for accurate pattern recognition and phase identification. The cardiac electrical events help identify the timing of various waveform components:</p>
                        
                        <img src="images/ekgtracing.hepatic.png" alt="EKG Tracing with Hepatic Vein Waveform" class="waveform-image">
                        
                        <p>With EKG tracing, clinicians can precisely identify:</p>
                        <ul>
                            <li>The <strong>S wave</strong> occurring during ventricular systole (between QRS complex and T wave)</li>
                            <li>The <strong>D wave</strong> during early ventricular diastole (after T wave)</li>
                            <li>The <strong>A wave</strong> during atrial contraction (shortly after P wave)</li>
                            <li>The <strong>V wave</strong> at end-systole (during the T wave)</li>
                        </ul>
                        
                        <p>This temporal correlation helps identify waveform abnormalities with confidence, particularly when distinguishing between S and D waves in cases of mild congestion or determining true flow reversals in severe congestion.</p>
                    </div>

                    <div class="waveform-section">
                        <h2>1. Hepatic Vein Waveforms</h2>
                        
                        <h3>Normal Pattern</h3>
                        <ul>
                            <li><strong>"S > D":</strong> The systolic wave (S) is larger than the diastolic wave (D) when viewed on Doppler.</li>
                            <li>Includes small retrograde deflections: the A wave (atrial contraction) and a tiny V wave (end-systole).</li>
                            <li>Overall, flow is predominantly toward the heart during both systole and diastole, with only minor reversals in late diastole (A wave)<sup class="citation"><a href="#reference-4">4</a></sup>.</li>
                        </ul>
                        
                        <h3>Mild Congestion</h3>
                        <ul>
                            <li><strong>"S < D":</strong> The systolic wave is still below the baseline (forward) but smaller in amplitude compared to the diastolic wave.</li>
                            <li>The A wave (atrial reversal) becomes more pronounced; the V wave may also be noticeable.</li>
                            <li>Suggests rising right atrial pressure, but no full-flow reversal in systole yet<sup class="citation"><a href="#reference-5">5,6</a></sup>.</li>
                        </ul>
                        
                        <h3>Severe Congestion</h3>
                        <ul>
                            <li><strong>Reversed S Wave:</strong> Now the S wave is above the baseline, indicating backward flow into the liver during systole.</li>
                            <li>Only the D wave remains antegrade. The A (and sometimes V) waves become markedly elevated.</li>
                            <li>Reflects significantly elevated right atrial pressures, often seen in severe tricuspid regurgitation or right-sided heart failure<sup class="citation"><a href="#reference-2">2,5</a></sup>.</li>
                        </ul>
                        
                        <div class="image-tile">
                            <div class="title">Hepatic Vein S-D Reversal</div>
                            <img src="images/Hepatic.SR.SD.png" alt="Hepatic Vein S-D Reversal Waveform">
                            <div class="caption">
                                This image demonstrates severe systolic flow reversal in a hepatic vein. Note how the S wave appears above the baseline (retrograde flow during systole) while the D wave remains below the baseline (antegrade flow during diastole). This pattern indicates significant right-sided venous congestion and is often associated with elevated right atrial pressures.
                            </div>
                        </div>
                    </div>

                    <div class="waveform-section">
                        <h2>2. Portal Vein Waveforms</h2>
                        
                        <h3>Normal Pattern</h3>
                        <ul>
                            <li><strong>Continuous Monophasic Flow:</strong> In healthy states, the portal vein shows essentially steady forward flow (hepatopetal), with minimal respiratory or cardiac pulsatility.</li>
                            <li>Pulsatility fraction < 30% (little variation in velocity over the cardiac cycle)<a href="#reference-3" class="citation">3</a><a href="#reference-7" class="citation">7</a>.</li>
                        </ul>
                        
                        <h3>Mild Congestion</h3>
                        <ul>
                            <li><strong>Mildly Pulsatile Flow:</strong> A noticeable undulation in velocity emerges, yielding a 30–50% pulsatility index.</li>
                            <li>Forward flow is preserved (no reversal), but the waveform starts dipping and peaking in sync with cardiac activity<a href="#reference-2" class="citation">2</a><a href="#reference-3" class="citation">3</a>.</li>
                        </ul>
                        
                        <h3>Severe Congestion</h3>
                        <ul>
                            <li><strong>High Pulsatility > 50%:</strong> Marked oscillation of the portal flow with deep troughs.</li>
                            <li>Can approach or briefly cross the baseline (or show short-lived flow reversal), reflecting high venous pressures transmitted back from the right atrium and hepatic circulation<a href="#reference-3" class="citation">3</a><a href="#reference-6" class="citation">6</a>.</li>
                        </ul>
                    </div>

                    <div class="waveform-section">
                        <h2>3. Intrarenal (Renal Parenchymal) Vein Waveforms</h2>
                        
                        <h3>Normal Pattern</h3>
                        <ul>
                            <li><strong>Continuous Monophasic Flow:</strong> The tiny interlobar veins in the kidney typically exhibit a steady, non-pulsatile flow throughout the cardiac cycle<sup class="citation"><a href="#reference-7">7</a></sup>.</li>
                            <li>No distinct systolic or diastolic components are recognizable; wave appears almost flat on Doppler.</li>
                        </ul>
                        
                        <h3>Mild Congestion</h3>
                        <ul>
                            <li><strong>Biphasic (S & D) Pulsatile Flow:</strong> As venous pressure rises, a waveform emerges with two forward-flow peaks—one in systole and another in diastole—separated by a brief trough.</li>
                            <li>Called a "discontinuous" pattern, it reflects moderate venous congestion within the renal parenchyma<a href="#reference-1" class="citation">1</a><a href="#reference-5" class="citation">5</a>.</li>
                        </ul>
                        
                        <h3>Severe Congestion</h3>
                        <ul>
                            <li><strong>Monophasic D-Only Flow:</strong> The systolic component disappears entirely, and only diastolic flow remains visible per heartbeat.</li>
                            <li>Signifies significant back-pressure on the kidney's venous outflow. This pattern correlates with higher risk of acute kidney injury<sup class="citation"><a href="#reference-1">1,8</a></sup>.</li>
                        </ul>
                    </div>

                    <div class="waveform-section">
                        <h2>Putting It All Together: VExUS Grading</h2>
                        
                        <img src="images/vexus.grading.png" alt="VExUS Grading System" class="waveform-image">
                        
                        <ul>
                            <li><strong>Grade 0 (Normal):</strong> All hepatic, portal, and renal waveforms are normal, with a collapsible IVC.</li>
                            <li><strong>Grade 1 (Mild):</strong> One or more veins show mild abnormalities (e.g., S < D in hepatic vein, mild pulsatility in portal vein, or biphasic renal flow) combined with a dilated or non-collapsing IVC.</li>
                            <li><strong>Grade 2 (Moderate):</strong> At least one severe abnormality (e.g., reversed S wave in hepatic vein, marked pulsatility or brief reversal in portal vein, or D-only renal flow).</li>
                            <li><strong>Grade 3 (Severe):</strong> Two or more severe waveform changes across hepatic, portal, or renal veins.</li>
                        </ul>
                        
                        <p>Patients with advanced VExUS grades are at higher risk for congestive organ injury (hepatic congestion, kidney injury, etc.), and recognition of these patterns prompts intensified decongestive therapies<a href="#reference-1" class="citation">1</a><a href="#reference-2" class="citation">2</a><a href="#reference-8" class="citation">8</a>.</p>
                    </div>

                    <div class="waveform-section">
                        <h2>References</h2>
                        <div class="reference-grid">
                            <div class="reference-tile">
                                <div class="reference-number">1</div>
                                <div class="reference-title">The Venous Excess Ultrasound Grading System (VExUS) in Predicting AKI in Cardiac Surgery Patients</div>
                                <div class="reference-authors">Beaubien-Souligny W, et al.</div>
                                <div class="reference-journal">Crit Care Med. 2021;49(3):e263-e272</div>
                                <a href="https://journals.lww.com/ccmjournal/Fulltext/2021/03000/The_Venous_Excess_Ultrasound_Grading_System.6.aspx" class="reference-link" target="_blank">View Article</a>
                            </div>

                            <div class="reference-tile">
                                <div class="reference-number">2</div>
                                <div class="reference-title">Focused Ultrasound Evaluation in Acute Medicine</div>
                                <div class="reference-authors">Beaubien-Souligny W, et al.</div>
                                <div class="reference-journal">J Am Heart Assoc. 2020;9:e014974</div>
                                <a href="https://www.ahajournals.org/doi/10.1161/JAHA.119.014974" class="reference-link" target="_blank">View Article</a>
                            </div>

                            <div class="reference-tile">
                                <div class="reference-number">3</div>
                                <div class="reference-title">Clinical Significance of Portal Flow Pulsatility</div>
                                <div class="reference-authors">Denault AY, et al.</div>
                                <div class="reference-journal">J Cardiothorac Vasc Anesth. 2022;36(3):874-883</div>
                                <a href="https://www.sciencedirect.com/science/article/pii/S1053077021005960" class="reference-link" target="_blank">View Article</a>
                            </div>

                            <div class="reference-tile">
                                <div class="reference-number">4</div>
                                <div class="reference-title">Guidelines for Performing a Comprehensive Transthoracic Echocardiographic Examination in Adults</div>
                                <div class="reference-authors">Mitchell C, et al.</div>
                                <div class="reference-journal">J Am Soc Echocardiogr. 2019;32(1):1-64</div>
                                <a href="https://www.onlinejase.com/article/S0894-7317(18)30760-5/fulltext" class="reference-link" target="_blank">View Article</a>
                            </div>

                            <div class="reference-tile">
                                <div class="reference-number">5</div>
                                <div class="reference-title">Evaluation of organ congestion in heart failure</div>
                                <div class="reference-authors">Mullens W, et al.</div>
                                <div class="reference-journal">J Am Coll Cardiol. 2023;81(8):821-836</div>
                                <a href="https://www.jacc.org/doi/10.1016/j.jacc.2022.11.078" class="reference-link" target="_blank">View Article</a>
                            </div>

                            <div class="reference-tile">
                                <div class="reference-number">6</div>
                                <div class="reference-title">Early Detection of Fluid Overload and Elevated Venous Pressure</div>
                                <div class="reference-authors">Ait-Oufella H, et al.</div>
                                <div class="reference-journal">Crit Care. 2019;23(1):176</div>
                                <a href="https://ccforum.biomedcentral.com/articles/10.1186/s13054-019-2443-7" class="reference-link" target="_blank">View Article</a>
                            </div>

                            <div class="reference-tile">
                                <div class="reference-number">7</div>
                                <div class="reference-title">Renal Doppler Ultrasonography in the Critical Care Setting</div>
                                <div class="reference-authors">Sobczyk D, Nycz K</div>
                                <div class="reference-journal">Crit Care Res Pract. 2020;2020:8858794</div>
                                <a href="https://www.hindawi.com/journals/ccrp/2020/8858794/" class="reference-link" target="_blank">View Article</a>
                            </div>

                            <div class="reference-tile">
                                <div class="reference-number">8</div>
                                <div class="reference-title">A Stepwise Demonstration of the VExUS Score</div>
                                <div class="reference-authors">Sorouri K, et al.</div>
                                <div class="reference-journal">J Cardiothorac Vasc Anesth. 2022;36(4):1163-1171</div>
                                <a href="https://www.sciencedirect.com/science/article/pii/S1053077021008502" class="reference-link" target="_blank">View Article</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="html5up-phantom/assets/js/jquery.min.js"></script>
    <script src="html5up-phantom/assets/js/browser.min.js"></script>
    <script src="html5up-phantom/assets/js/breakpoints.min.js"></script>
    <script src="html5up-phantom/assets/js/util.js"></script>
    <script src="html5up-phantom/assets/js/main.js"></script>
    
    <script>
        // Initialize Fancybox with improved scroll handling
        Fancybox.bind("[data-fancybox]", {
            fitToView: false,
            autoSize: false,
            closeClick: false,
            helpers: {
                overlay: {
                    locked: false
                }
            },
            touch: {
                vertical: true,
                momentum: true
            },
            dragToClose: true,
            closeButton: "top",
            template: {
                closeButton: '<button data-fancybox-close class="fancybox-button fancybox-button--close">' +
                            '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">' +
                            '<path d="M20 6.91L17.09 4 12 9.09 6.91 4 4 6.91 9.09 12 4 17.09 6.91 20 12 14.91 17.09 20 20 17.09 14.91 12 20 6.91z"/>' +
                            '</svg>' +
                            '</button>'
            },
            on: {
                init: (fancybox) => {
                    document.body.classList.add('fancybox-active');
                },
                destroy: (fancybox) => {
                    document.body.classList.remove('fancybox-active');
                }
            }
        });

        // Special configuration for vein guides
        Fancybox.bind("[data-fancybox='vein-guides']", {
            fitToView: false,
            autoSize: false,
            closeClick: false,
            helpers: {
                overlay: {
                    locked: false
                }
            },
            dragToClose: false,
            on: {
                reveal: (fancybox, slide) => {
                    const galleryData = slide.triggerEl?.dataset?.gallery;
                    if (galleryData) {
                        const galleryImages = JSON.parse(galleryData);
                        
                        const viewAllBtn = document.createElement('button');
                        viewAllBtn.className = 'view-all-images-btn';
                        viewAllBtn.textContent = 'View All Images';
                        viewAllBtn.style.cssText = `
                            position: absolute;
                            bottom: 20px;
                            right: 20px;
                            padding: 10px 20px;
                            background: rgba(0, 0, 0, 0.7);
                            color: white;
                            border: none;
                            border-radius: 5px;
                            cursor: pointer;
                            z-index: 10;
                        `;
                        
                        viewAllBtn.addEventListener('click', () => {
                            fancybox.close();
                            
                            Fancybox.show(
                                galleryImages.map(src => ({
                                    src,
                                    type: 'image'
                                })),
                                {
                                    fitToView: false,
                                    autoSize: false,
                                    helpers: {
                                        overlay: {
                                            locked: false
                                        }
                                    }
                                }
                            );
                        });
                        
                        const content = slide.el;
                        if (content) {
                            content.style.position = 'relative';
                            content.appendChild(viewAllBtn);
                        }
                    }
                }
            }
        });

        // Handle iOS-specific behavior
        document.addEventListener('DOMContentLoaded', () => {
            const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
            if (isIOS) {
                document.documentElement.classList.add('is-ios');
            }
        });
    </script>
</body>
</html> 